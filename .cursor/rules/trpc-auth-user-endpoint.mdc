---
description: 
globs: **/server/**/*.ts
alwaysApply: false
---
# tRPC: Use Auth Endpoint for User Data

When accessing user data via tRPC, always use the `auth` endpoint, not `public`, to ensure only authenticated users can access sensitive information.

- The user endpoint in [user.ts](mdc:app/server/router/loader/user.ts) should use `p.auth`, not `p.public`.
- See the tRPC context and endpoint setup in [trpc.ts](mdc:app/server/trpc.ts).

## Example
```ts
// Good
export const user = p.auth.query(async ({ ctx }) => {
  // ...
});

// Bad
export const user = p.public.query(async ({ ctx }) => {
  // ...
});
```

## Rationale
- Ensures user data is only accessible to authenticated sessions
- Prevents accidental exposure of sensitive user information
